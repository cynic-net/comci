from    comci.git_tscript  import main, parseargs
import  pytest

def test_parseargs_none():
    with pytest.raises(SystemExit) as ex:
        parseargs([])
    assert 2 == ex.value.code

def test_main_show(capsys):
    with pytest.raises(SystemExit) as ex:  main(['show'])
    assert 9 == ex.value.code \
       and 'unimplemented' in capsys.readouterr().err

def test_main_run():
    with pytest.raises(SystemExit) as ex:
        main(['run', 'foo', 'bar'])
    print(dir(ex.value))
    assert (2, 'bad args') == (ex.value.code, ex.value)

